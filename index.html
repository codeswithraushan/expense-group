<!DOCTYPE html>
<html>
<head>
    <title>Room Expense App</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<h2>ğŸ  Roommates Expense App</h2>

<form method="POST">
    <input type="text" name="name" placeholder="Your Name" required>
    <input type="number" step="0.01" name="amount" placeholder="Amount" required>
    <input type="text" name="reason" placeholder="Reason">
    <select name="category">
        <option value="Food">ğŸ” Food</option>
        <option value="Utilities">ğŸ’¡ Utilities</option>
        <option value="Rent">ğŸ  Rent</option>
        <option value="Entertainment">ğŸ® Entertainment</option>
        <option value="Other">ğŸ“¦ Other</option>
    </select>
    <button>Add Expense</button>
</form>

<h3>Total Expense: â‚¹{{ "%.2f"|format(total) }}</h3>
<h3>Each Person Pays: â‚¹{{ "%.2f"|format(split) }}</h3>
<h3>Total Members: {{ members|length }}</h3>

<h4>Per Person Spending:</h4>
<ul style="list-style: none;">
{% for person, amount in person_totals.items() %}
    <li><strong>{{ person }}:</strong> â‚¹{{ "%.2f"|format(amount) }} 
        {% if amount > split %}
            <span style="color: green;">(+â‚¹{{ "%.2f"|format(amount - split) }})</span>
        {% elif amount < split %}
            <span style="color: red;">(-â‚¹{{ "%.2f"|format(split - amount) }})</span>
        {% endif %}
    </li>
{% endfor %}
</ul>

<table>
<tr>
    <th>Date</th>
    <th>Name</th>
    <th>Amount</th>
    <th>Category</th>
    <th>Reason</th>
    <th>Action</th>
</tr>
{% for e in expenses %}
<tr>
    <td>{{ e['date_added'][:16] }}</td>
    <td>{{ e['name'] }}</td>
    <td>â‚¹{{ "%.2f"|format(e['amount']) }}</td>
    <td>{{ e['category'] }}</td>
    <td>{{ e['reason'] }}</td>
    <td><a href="/delete/{{ e['id'] }}" onclick="return confirm('Delete this expense?')" style="color: red;">âŒ</a></td>
</tr>
{% endfor %}
</table>

</body>
</html>